{% extends 'layouts/base.html' %}

{% block content %}
    <!-- Header content -->

    <!-- Custom Solution Selector -->
    <div id="CustomSolution-Section">
        <div class="space space-2"></div>
        <section>
            <div>
                <p style="text-align: center; color:white;">
                    Konfigurieren Sie Ihre persönliche Kabellösung zur Stromversorgung von AES Akkus
                </p>
            </div>
        </section>
        <div class="space space-2"></div>
        <div style="text-align: center;">
            <button class="next-button" onclick="goToSection('Akkuvariante-Section')">Weiter zum Konfigurator</button>
            <button class="next-button" onclick="goToSection('Zusammenfassung-Section')">Hochladen von Sonderlösungen</button>
        </div>
    </div>

    <!-- Akkuvariante Selector -->
    <div id="Akkuvariante-Section">
        <!-- <div class="space space-2"></div> -->
        <section class="layoutblock lb-10col-width lb-hinweisausgabe">
            <div class="content anlauf_text">
                <p style="text-align: center;">
                    Akkuvariante
                </p>
            </div>
        </section>
        <div class="space space-2"></div>
        <div class="akkuvariante-selectors-container">
            {% for akkuvariante in akkuvarianten %}
                <div class="akkuvariante-selector" onclick="selectAkkuvariante('{{ akkuvariante.akkuvariante_name }}')">
                    <label>{{ akkuvariante.akkuvariante_name }}</label>
                    <img src="media\{{ akkuvariante.akkuvariante_image_path }}" alt="{{ akkuvariante.akkuvariante_name }}">
                </div>
            {% empty %}
                <p>No Akkuvarianten available.</p>
            {% endfor %}
            <div class="space space-2"></div>
            <p>Mit 120 Ohm CAN-Bus Widerstand?</p>
            <div>
                <label for="ja-nein-option">Ja</label>
                <input type="radio" id="ja-nein-option" name="ja-nein-option" value="ja">
                <label for="ja-nein-option">Nein</label>
                <input type="radio" id="ja-nein-option" name="ja-nein-option" value="nein">
            </div>
        </div>
        <div class="space space-2"></div>
        <div style="text-align: center;">
            <button class="next-button" onclick="goToSection('Kabelvariante-Section')">Nächste</button>
        </div>
    </div>

    <!-- Kabelvariante Selector -->
    <div id="Kabelvariante-Section">
        <!-- <div class="space space-2"></div> -->
        <section class="layoutblock lb-10col-width lb-hinweisausgabe">
            <div class="content anlauf_text">
                <p style="text-align: center;">
                    Kabelvariante
                </p>
            </div>
        </section>
        <div class="space space-2"></div>
        <div class="kabelvariante-selectors-container">
            {% for kabelvariante in kabelvarianten %}
                <div class="kabelvariante-selector" onclick="selectKabelvariante('{{ kabelvariante.kabelvariante_name }}')">
                    <label>{{ kabelvariante.kabelvariante_name }}</label>
                    <img src="media\{{ kabelvariante.kabelvariante_image_path }}" alt="{{ kabelvariante.kabelvariante_name }}">
                </div>
            {% empty %}
                <p>No Kabelvarianten available.</p>
            {% endfor %}
        </div>
        <div class="space space-2"></div>
        <div style="text-align: center;">
            <button class="prev-button" onclick="goToSection('Akkuvariante-Section')">Zuruck</button>
            <button class="next-button" onclick="goToSection('Schnittstellen-Section')">Nächste</button>
        </div>
    </div>

    <!-- Schnittstellen Selector -->
    <div id="Schnittstellen-Section">
        <!-- <div class="space space-2"></div> -->
        <section class="layoutblock lb-10col-width lb-hinweisausgabe">
            <div class="content anlauf_text">
                <p style="text-align: center;">
                    Schnittstellen
                </p>
            </div>
        </section>
        <div class="space space-2"></div>
        {% load custom_filters %}
        <div id="schnittstelle-slider-container">
            {% for kabelvariante in kabelvarianten %}
                <div class="schnittstelle-slider-container-class" id="{{ kabelvariante.kabelvariante_name|slugify }}-schnittstelle-slider">
                    <img class="schnittstelle-image" src="media\{{ kabelvariante.masse_image_path }}">
                    {% if kabelvariante.splits > 1 %}
                        {% with splits=kabelvariante.splits %}
                            {% for i in splits|create_range_schnittstellen %}
                                <div class="schnittstelle-row">
                                    <div class="schnittstelle-heading">
                                        <div class="schnittstelle-heading-option">Schnittstelle S{{ i }}</div>
                                    </div>
                                    <div class="schnittstelle-selectors">
                                        {% for schnittstelle in schnittstellen %}
                                            <div class="schnittstelle-selector" id="{{ schnittstelle.schnittstelle_name|slugify }}-S{{ i }}" data-split-index="{{ i }}" onclick="selectschnittstellenvariante('{{ schnittstelle.schnittstelle_name }}', '{{ i }}')">
                                                <label>{{ schnittstelle.schnittstelle_name }}</label>
                                                <img src="media\{{ schnittstelle.schnittstelle_image_path }}" alt="{{ schnittstelle.schnittstelle_name }}">
                                            </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            {% endfor %}
                        {% endwith %}
                    {% elif kabelvariante.splits == 1 %}
                        <div class="schnittstelle-heading">
                            <div class="schnittstelle-heading-option">Schnittstelle S</div>
                        </div>
                        <div class="schnittstelle-selectors">
                            {% for schnittstelle in schnittstellen %}
                                <div class="schnittstelle-selector" id="{{ schnittstelle.schnittstelle_name|slugify }}-S" data-split-index="S" onclick="selectschnittstellenvariante('{{ schnittstelle.schnittstelle_name }}', 'S')">
                                    <label>{{ schnittstelle.schnittstelle_name }}</label>
                                    <img src="media\{{ schnittstelle.schnittstelle_image_path }}" alt="{{ schnittstelle.schnittstelle_name }}">
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p>No valid Kabelvarianten available.</p>
                    {% endif %}
                </div>
            {% empty %}
                <p>No Kabelvarianten available.</p>
            {% endfor %}
        </div>
        <div class="space space-2"></div>
        <div style="text-align: center;">
            <button class="prev-button" onclick="goToSection('Kabelvariante-Section')">Zuruck</button>
            <button class="next-button" onclick="goToSection('Masse-Section')">Nächste</button>
        </div>
    </div>

    <!-- Maße Slider Container -->
    <div id="Masse-Section">
        <!-- <div class="space space-2"></div> -->
        <section class="layoutblock lb-10col-width lb-hinweisausgabe">
            <div class="content anlauf_text">
                <p style="text-align: center;">
                    Maße
                </p>
            </div>
        </section>
        <div class="space space-2"></div>
        <div id="masse-slider-container">
            {% for kabelvariante in kabelvarianten %}
                <div class="masse-slider-container-class" id="{{ kabelvariante.kabelvariante_name|slugify }}-messe-slider">
                    <img class="masse-image" src="media\{{ kabelvariante.masse_image_path }}">
                    {% if kabelvariante.splits > 1 %}
                        <div class="input-pair">
                            <label for="{{ kabelvariante.kabelvariante_name|slugify }}-main-length">Main Length (cm): </label>
                            <input type="number" id="{{ kabelvariante.kabelvariante_name|slugify }}-main-length" min="{{ kabelvariante.main_part_min_length }}" max="{{ kabelvariante.main_part_max_length }}" step="1" value="{{ kabelvariante.main_part_min_length }}" oninput="masseChange(this.value)">
                        </div>
                        {% for i in kabelvariante.splits|create_range_masse %}
                            <div class="input-pair">
                                <label for="{{ kabelvariante.kabelvariante_name|slugify }}-branch{{ forloop.counter }}-length">Branch {{ forloop.counter }} Length (cm): </label>
                                <input type="number" id="{{ kabelvariante.kabelvariante_name|slugify }}-branch{{ forloop.counter }}-length" min="{{ kabelvariante.split_part_min_length }}" max="{{ kabelvariante.split_part_max_length }}" step="1" value="{{ kabelvariante.split_part_min_length }}" oninput="masseChange(this.value)">
                            </div>
                        {% endfor %}
                    {% elif kabelvariante.splits == 1 %}
                        <div class="input-pair">
                            <label for="{{ kabelvariante.kabelvariante_name|slugify }}-main-length-input">Main length (cm):</label>
                            <input type="number" id="{{ kabelvariante.kabelvariante_name|slugify }}-main-length-input" min="{{ kabelvariante.main_part_min_length }}" max="{{ kabelvariante.main_part_max_length }}" step="1" value="{{ kabelvariante.main_part_min_length }}" oninput="masseChange(this.value)">
                        </div>
                    {% else %}
                        <p>No valid Kabelvarianten available.</p>
                    {% endif %}
                </div>
            {% empty %}
                <p>No Kabelvarianten available.</p>
            {% endfor %}
        </div>
        <div class="space space-2"></div>
        <div style="text-align: center;">
            <button class="prev-button" onclick="goToSection('Schnittstellen-Section')">Zuruck</button>
            <button class="next-button" onclick="goToSection('Zusammenfassung-Section')">Nächste</button>
        </div>
    </div>
        
    <!-- Zusammenfassung Container -->
    <div id="Zusammenfassung-Section">
        <!-- <div class="space space-2"></div> -->
        <section class="layoutblock lb-10col-width lb-hinweisausgabe">
            <div class="content anlauf_text">
                <p style="text-align: center;">
                    Zusammenfassung
                </p>
            </div>
        </section>
        <div class="space space-2"></div>
        <div id="summary-container">
            <label id="akkuvariante-summary">Akkuvariante: </label>
            <label id="kabelvariante-summary">Kabelvariante: </label>
            <label id="schnittstelle-summary">Schnittstelle: </label>
            <label id="masse-summary">Maße: </label>
            <label id="gesamtpreis-summary">Gesamtpreis: </label>
        </div>
        <div class="space space-2"></div>
        <div style="text-align: center;">
            <button class="prev-button" onclick="goToSection('Masse-Section')">Zuruck</button>
            <button class="next-button" onclick="addToCart()">Add to Cart</button>
        </div>
    </div>

    <div class="space space-2"></div>

{% endblock %}